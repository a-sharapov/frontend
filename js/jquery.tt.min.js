/**
 * @name		jQuery touchTouch plugin
 * @author		Martin Angelov
 * @version 	1.0
 * @url			http://tutorialzine.com/2012/04/mobile-touch-gallery/
 * @license		MIT License
 */
(function(){var a=$('<div id="galleryOverlay">'),b=$('<div id="gallerySlider">'),c=$('<a id="prevArrow"></a>'),d=$('<a id="nextArrow"></a>'),e=!1;$.fn.touchTouch=function(){function j(b){return e?!1:(a.show(),setTimeout(function(){a.addClass("visible")},100),l(b),e=!0,void 0)}function k(){return e?(a.hide().removeClass("visible"),e=!1,$(".placeholder").empty(),i=h,void 0):!1}function l(a){b.css("left",100*-a+"%")}function m(a){setTimeout(function(){n(a)},1e3)}function n(a){return 0>a||a>=i.length?!1:(o(i.eq(a).attr("href"),function(){f.eq(a).html(this)}),void 0)}function o(a,b){var c=$("<img>").on("load",function(){b.call(c)});c.attr("src",a)}function p(){i.length>g+1?(g++,l(g),m(g+1)):(b.addClass("rightSpring"),setTimeout(function(){b.removeClass("rightSpring")},500))}function q(){g>0?(g--,l(g),m(g-1)):(b.addClass("leftSpring"),setTimeout(function(){b.removeClass("leftSpring")},500))}var f=$([]),g=0,h=this,i=h;a.hide().appendTo("body"),b.appendTo(a),i.each(function(){f=f.add($('<div class="placeholder">'))}),b.append(f).on("click",function(a){$(a.target).is("img")||k()}),$("body").on("touchstart","#gallerySlider img",function(a){var c=a.originalEvent,d=c.changedTouches[0].pageX;return b.on("touchmove",function(a){a.preventDefault(),c=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],c.pageX-d>10?(b.off("touchmove"),q()):-10>c.pageX-d&&(b.off("touchmove"),p())}),!1}).on("touchend",function(){b.off("touchmove")}),i.on("click",function(a){a.preventDefault();var c,d,b=$(this),e=b.parent().closest("[data-gallery]");b.attr("data-gallery")?(c=b.attr("data-gallery"),d="item"):e.length&&(c=e.attr("data-gallery"),d="ancestor"),c&&"item"==d?i=$("[data-gallery="+c+"]"):c&&"ancestor"==d&&(i=i.filter(function(){return $(this).parent().closest("[data-gallery]").length})),g=i.index(this),j(g),n(g),m(g+1),m(g-1)}),"ontouchstart"in window||(a.append(c).append(d),c.click(function(a){a.preventDefault(),q()}),d.click(function(a){a.preventDefault(),p()})),$(window).bind("keydown",function(a){37==a.keyCode?q():39==a.keyCode&&p()})}})(jQuery);